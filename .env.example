# Fabric MCP Server - Environment Configuration
# Copy this file to .env and update the values

# =============================================================================
# Server Configuration
# =============================================================================

# Transport protocol: stdio or http
FABRIC_TRANSPORT=http

# HTTP port (only used when transport is http)
FABRIC_PORT=8000

# Pre-shared key for authentication
FABRIC_PSK=your-secret-key-here

# Path to agents configuration file
FABRIC_CONFIG=agents.yaml

# =============================================================================
# Database Configuration (PostgreSQL)
# =============================================================================

# Set to 'true' to use PostgreSQL instead of YAML
USE_POSTGRES=true

# PostgreSQL connection URL
# Format: postgresql://user:password@host:port/database
DATABASE_URL=postgresql://fabric:fabric_secret@localhost:5432/fabric_registry

# Or specify individual connection parameters
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_USER=fabric
POSTGRES_PASSWORD=fabric_secret
POSTGRES_DB=fabric_registry

# =============================================================================
# Observability Configuration
# =============================================================================

# Enable Prometheus metrics
ENABLE_METRICS=true

# Log level: DEBUG, INFO, WARNING, ERROR
LOG_LEVEL=INFO

# Enable structured JSON logging
JSON_LOGS=true

# =============================================================================
# Security Configuration
# =============================================================================

# Allowed hosts (comma-separated, use * for all)
ALLOWED_HOSTS=*

# CORS origins (comma-separated, use * for all)
CORS_ORIGINS=*

# Enable request rate limiting
ENABLE_RATE_LIMITING=false
RATE_LIMIT_REQUESTS_PER_MINUTE=60

# =============================================================================
# Monitoring Stack (Grafana/Prometheus)
# =============================================================================

# Grafana admin credentials
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin

# =============================================================================
# Public Registry Configuration (Future)
# =============================================================================

# Enable public registry mode
PUBLIC_REGISTRY=false

# Require authentication for registration
REGISTRY_REQUIRES_AUTH=true

# Allow external agents to register
ALLOW_EXTERNAL_REGISTRATION=false

# Registry namespace
REGISTRY_NAMESPACE=fabric

# =============================================================================
# Agent Configuration
# =============================================================================

# Default agent timeout (milliseconds)
DEFAULT_AGENT_TIMEOUT_MS=60000

# Maximum agent timeout (milliseconds)
MAX_AGENT_TIMEOUT_MS=300000

# Health check interval (seconds)
HEALTH_CHECK_INTERVAL=30

# =============================================================================
# Development Settings
# =============================================================================

# Enable auto-reload on code changes (development only)
RELOAD=false

# Debug mode
DEBUG=false

# =============================================================================
# OVHcloud Deployment Example
# =============================================================================

# For OVHcloud deployment, you might use:
# FABRIC_PORT=80
# FABRIC_PSK=your-production-secret-key
# DATABASE_URL=postgresql://fabric:password@your-ovh-db-server:5432/fabric_registry
# USE_POSTGRES=true
# ENABLE_METRICS=true
# LOG_LEVEL=INFO
# ALLOWED_HOSTS=fabric.yourdomain.com
# CORS_ORIGINS=https://yourdomain.com,https://app.yourdomain.com
